{% extends "base.html" %}
{% block title %}Dashboard — Patient Portal{% endblock %}
{% block content %}
<div class="row">
  <div class="col-lg-4">
    <div class="card card-ghost p-3 mb-3">
      <div class="d-flex align-items-center">
        <div class="avatar me-3">{{ patient.given|slice:":1" }}{{ patient.family|slice:":1" }}</div>
        <div>
            <h5 class="mb-0">{{ patient.given }} {{ patient.family }}</h5>
            <div class="text-muted small">Patient ID: <strong>{{ patient.identifier }}</strong></div>
        </div>
        </div>

      <hr />
      <div class="small">
        <div><strong>Birth:</strong> {{ patient.birth_date|default:"-" }}</div>
        <div><strong>Phone:</strong> {{ patient.phone|default:"-" }}</div>
        <div class="mt-2"><a class="btn btn-sm btn-outline-primary" href="{% url 'patient:profile' %}">Edit profile</a></div>
      </div>
    </div>

    <div class="card card-ghost p-3">
      <h6>Quick links</h6>
      <ul class="list-unstyled small">
        <li><a href="{% url 'patient:records' %}">Medical records</a></li>

      </ul>
    </div>
  </div>

  <div class="col-lg-8">
    <div class="card card-ghost p-3 mb-3">
      <h5 class="mb-3">Recent observations</h5>
      {% if recent_obs %}
        <div class="list-group">
          {% for r in recent_obs %}
            <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" href="{% url 'patient:record_detail' r.id %}">
              <div>
                <div class="fw-bold">{{ r.code }}</div>
                <div class="small text-muted">{{ r.effective_date|date:"M d, Y H:i" }} — {{ r.performer }}</div>
              </div>
              <div class="text-end">
                <div class="h6 mb-0">{{ r.value }} {% if r.unit %}{{ r.unit }}{% endif %}</div>
              </div>
            </a>
          {% endfor %}
        </div>
      {% else %}
        <div class="text-muted small">No recent observations.</div>
      {% endif %}
    </div>

    <div class="card card-ghost p-3">
      <h5>Activity</h5>
      <div class="small text-muted">Basic portal activity and messages will show here.</div>
    </div>
  </div>
</div>
{% endblock %}
